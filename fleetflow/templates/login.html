<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FleetFlow | Login</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.2/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-icons/1.11.3/font/bootstrap-icons.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@300;400;500;600;700&family=JetBrains+Mono:wght@400;600&display=swap" rel="stylesheet">
    <style>
        :root {
            --bg-dark: #0a0e1a; --bg-card: #111827; --bg-elevated: #1a2235;
            --accent: #00d4aa; --accent2: #4f8ef7; --border: #1e2d45;
            --text-primary: #f1f5f9; --text-secondary: #94a3b8;
        }
        * { box-sizing: border-box; margin: 0; padding: 0; }
        body { font-family: "Space Grotesk", sans-serif; background: var(--bg-dark); color: var(--text-primary); min-height: 100vh; display: flex; overflow: hidden; }

        /* LEFT PANEL */
        .login-left { flex: 1; background: linear-gradient(135deg, #060b18 0%, #0d1f35 50%, #060b18 100%); display: flex; align-items: center; justify-content: center; position: relative; overflow: hidden; }

        /* Animated orbs */
        .orb { position: absolute; border-radius: 50%; filter: blur(80px); animation: orbFloat linear infinite; pointer-events: none; }
        .orb-1 { width: 500px; height: 500px; background: radial-gradient(circle, rgba(0,212,170,0.12) 0%, transparent 70%); top: -100px; left: -100px; animation-duration: 18s; }
        .orb-2 { width: 400px; height: 400px; background: radial-gradient(circle, rgba(79,142,247,0.1) 0%, transparent 70%); bottom: -80px; right: -80px; animation-duration: 22s; animation-delay: -8s; }
        .orb-3 { width: 300px; height: 300px; background: radial-gradient(circle, rgba(0,212,170,0.07) 0%, transparent 70%); top: 50%; left: 50%; animation-duration: 15s; animation-delay: -4s; }
        @keyframes orbFloat {
            0%   { transform: translate(0,0) scale(1); }
            25%  { transform: translate(30px,-40px) scale(1.05); }
            50%  { transform: translate(-20px,30px) scale(0.95); }
            75%  { transform: translate(40px,20px) scale(1.02); }
            100% { transform: translate(0,0) scale(1); }
        }

        /* Animated grid */
        .grid-bg { position: absolute; inset: 0; background-image: linear-gradient(rgba(30,45,69,0.6) 1px, transparent 1px), linear-gradient(90deg, rgba(30,45,69,0.6) 1px, transparent 1px); background-size: 44px 44px; animation: gridShift 20s linear infinite; }
        @keyframes gridShift { 0% { background-position: 0 0; } 100% { background-position: 44px 44px; } }

        /* Particles */
        .particles { position: absolute; inset: 0; pointer-events: none; }
        .particle { position: absolute; width: 2px; height: 2px; background: var(--accent); border-radius: 50%; animation: particleRise linear infinite; opacity: 0; }
        @keyframes particleRise {
            0%   { transform: translateY(0) translateX(0); opacity: 0; }
            10%  { opacity: 0.8; }
            90%  { opacity: 0.3; }
            100% { transform: translateY(-100vh) translateX(var(--drift)); opacity: 0; }
        }

        /* Scan line */
        .scan-line { position: absolute; left: 0; right: 0; height: 2px; background: linear-gradient(90deg, transparent, rgba(0,212,170,0.4), transparent); animation: scanDown 6s linear infinite; pointer-events: none; z-index: 1; }
        @keyframes scanDown { 0% { top: 0; opacity: 0; } 5% { opacity: 1; } 95% { opacity: 0.5; } 100% { top: 100%; opacity: 0; } }

        /* Pulse rings */
        .logo-rings { position: absolute; top: 50%; left: 50%; transform: translate(-50%,-50%); display: flex; align-items: center; justify-content: center; pointer-events: none; }
        .logo-ring { position: absolute; border: 1px solid rgba(0,212,170,0.15); border-radius: 50%; animation: ringPulse 3s ease-out infinite; }
        .logo-ring:nth-child(1) { width: 180px; height: 180px; animation-delay: 0s; }
        .logo-ring:nth-child(2) { width: 300px; height: 300px; animation-delay: 0.9s; }
        .logo-ring:nth-child(3) { width: 420px; height: 420px; animation-delay: 1.8s; }
        @keyframes ringPulse { 0% { opacity: 0.6; transform: scale(0.8); } 100% { opacity: 0; transform: scale(1.3); } }

        /* Floating stat cards */
        .floating-card { position: absolute; background: rgba(17,24,39,0.88); backdrop-filter: blur(12px); border: 1px solid rgba(0,212,170,0.2); border-radius: 14px; padding: 14px 18px; box-shadow: 0 8px 32px rgba(0,0,0,0.4); z-index: 3; min-width: 170px; }
        .fc-1 { top: 11%; right: 6%; animation: floatCard1 6s ease-in-out infinite; }
        .fc-2 { bottom: 17%; left: 6%; animation: floatCard2 7s ease-in-out infinite; animation-delay: -3s; }
        .fc-3 { top: 54%; right: 5%; animation: floatCard1 8s ease-in-out infinite; animation-delay: -5s; }
        @keyframes floatCard1 { 0%,100% { transform: translateY(0px) rotate(-1deg); } 50% { transform: translateY(-14px) rotate(1deg); } }
        @keyframes floatCard2 { 0%,100% { transform: translateY(0px) rotate(1deg); } 50% { transform: translateY(-18px) rotate(-1deg); } }
        .fc-label { font-size: 0.62rem; font-weight: 600; color: var(--text-secondary); text-transform: uppercase; letter-spacing: 1.5px; margin-bottom: 5px; }
        .fc-value { font-size: 1.5rem; font-weight: 700; font-family: "JetBrains Mono", monospace; color: var(--accent); line-height: 1; }
        .fc-value.blue { color: var(--accent2); }
        .fc-value.amber { color: #f59e0b; }
        .fc-sub { font-size: 0.67rem; color: var(--text-secondary); margin-top: 4px; }
        .fc-badge { display: inline-flex; align-items: center; gap: 3px; font-size: 0.64rem; font-weight: 600; color: #10b981; background: rgba(16,185,129,0.12); border-radius: 20px; padding: 2px 8px; margin-top: 6px; }
        .fc-badge.amber { color: #f59e0b; background: rgba(245,158,11,0.12); }

        /* Hero */
        .login-hero { position: relative; z-index: 2; text-align: center; padding: 40px; animation: heroEntrance 0.9s ease-out both; }
        @keyframes heroEntrance { from { opacity: 0; transform: translateY(30px); } to { opacity: 1; transform: translateY(0); } }
        .hero-logo { font-size: 3.2rem; font-weight: 700; color: var(--accent); letter-spacing: -2px; text-shadow: 0 0 40px rgba(0,212,170,0.25); }
        .hero-logo span { color: var(--text-secondary); font-weight: 300; }
        .hero-tag { font-size: 0.7rem; color: var(--text-secondary); letter-spacing: 3px; text-transform: uppercase; margin-top: 6px; }
        .hero-desc { margin-top: 24px; font-size: 1rem; color: var(--text-secondary); max-width: 340px; line-height: 1.7; }
        .feature-list { list-style: none; padding: 0; margin-top: 22px; text-align: left; max-width: 300px; }
        .feature-list li { display: flex; align-items: center; gap: 10px; padding: 7px 0; font-size: 0.85rem; color: var(--text-secondary); animation: fadeInLeft 0.5s ease both; }
        .feature-list li:nth-child(1) { animation-delay: 0.2s; }
        .feature-list li:nth-child(2) { animation-delay: 0.35s; }
        .feature-list li:nth-child(3) { animation-delay: 0.5s; }
        .feature-list li:nth-child(4) { animation-delay: 0.65s; }
        @keyframes fadeInLeft { from { opacity: 0; transform: translateX(-16px); } to { opacity: 1; transform: translateX(0); } }
        .feature-list li i { color: var(--accent); font-size: 0.95rem; flex-shrink: 0; }

        /* RIGHT PANEL */
        .login-right { width: 460px; background: var(--bg-card); border-left: 1px solid var(--border); display: flex; align-items: center; justify-content: center; padding: 48px 40px; position: relative; overflow-y: auto; }
        .login-right::before { content: ""; position: absolute; top: 0; left: 0; right: 0; height: 3px; background: linear-gradient(90deg, var(--accent), var(--accent2)); }
        .login-form-container { width: 100%; animation: slideIn 0.6s ease both; }
        @keyframes slideIn { from { opacity: 0; transform: translateX(20px); } to { opacity: 1; transform: translateX(0); } }
        .login-title { font-size: 1.6rem; font-weight: 700; margin-bottom: 4px; color: var(--text-primary); }
        .login-subtitle { color: var(--text-secondary); font-size: 0.875rem; margin-bottom: 28px; }
        .form-group { margin-bottom: 16px; }
        .form-label { font-size: 0.72rem; font-weight: 600; color: var(--text-secondary); text-transform: uppercase; letter-spacing: 0.5px; display: block; margin-bottom: 6px; }
        .form-control { background: var(--bg-elevated); border: 1px solid var(--border); color: var(--text-primary); border-radius: 10px; padding: 11px 14px; font-size: 0.875rem; font-family: "Space Grotesk", sans-serif; width: 100%; transition: border-color 0.2s, box-shadow 0.2s; }
        .form-control:focus { outline: none; border-color: var(--accent); box-shadow: 0 0 0 3px rgba(0,212,170,0.12); }
        .form-control::placeholder { color: rgba(148,163,184,0.45); }
        .input-icon-wrap { position: relative; }
        .input-icon { position: absolute; left: 12px; top: 50%; transform: translateY(-50%); color: var(--text-secondary); pointer-events: none; }
        .input-icon-wrap .form-control { padding-left: 38px; }
        .btn-login { width: 100%; background: var(--accent); color: #000; border: none; border-radius: 10px; padding: 13px; font-size: 0.9rem; font-weight: 700; letter-spacing: 0.3px; transition: all 0.2s; cursor: pointer; font-family: "Space Grotesk", sans-serif; position: relative; overflow: hidden; }
        .btn-login::after { content: ""; position: absolute; inset: 0; background: linear-gradient(90deg, transparent, rgba(255,255,255,0.15), transparent); transform: translateX(-100%); transition: transform 0.4s; }
        .btn-login:hover::after { transform: translateX(100%); }
        .btn-login:hover { background: #00c49a; transform: translateY(-1px); box-shadow: 0 8px 24px rgba(0,212,170,0.3); }
        .btn-register { width: 100%; background: transparent; border: 1px solid var(--border); color: var(--text-primary); border-radius: 10px; padding: 11px; font-size: 0.875rem; font-weight: 600; transition: all 0.2s; cursor: pointer; font-family: "Space Grotesk", sans-serif; text-decoration: none; display: block; text-align: center; }
        .btn-register:hover { border-color: var(--accent2); color: var(--accent2); background: rgba(79,142,247,0.06); }
        .divider-text { text-align: center; color: var(--text-secondary); font-size: 0.72rem; margin: 16px 0; position: relative; }
        .divider-text::before,.divider-text::after { content: ""; position: absolute; top: 50%; width: 40%; height: 1px; background: var(--border); }
        .divider-text::before { left: 0; } .divider-text::after { right: 0; }
        .demo-accounts { background: var(--bg-elevated); border-radius: 10px; padding: 12px 14px; border: 1px solid var(--border); }
        .demo-title { font-size: 0.67rem; font-weight: 600; color: var(--text-secondary); text-transform: uppercase; letter-spacing: 1px; margin-bottom: 8px; }
        .demo-account { display: flex; justify-content: space-between; align-items: center; padding: 6px 0; font-size: 0.76rem; color: var(--text-secondary); border-bottom: 1px solid rgba(30,45,69,0.8); cursor: pointer; transition: color 0.15s; }
        .demo-account:hover { color: var(--text-primary); }
        .demo-account:last-child { border: none; padding-bottom: 0; }
        .demo-account .role { color: var(--accent); font-size: 0.68rem; font-weight: 600; background: rgba(0,212,170,0.1); padding: 2px 8px; border-radius: 10px; }
        .alert { border-radius: 10px; font-size: 0.85rem; border: none !important; padding: 10px 14px; margin-bottom: 16px; }
        .alert-danger  { background: rgba(239,68,68,0.12)  !important; color: #ef4444 !important; }
        .alert-success { background: rgba(16,185,129,0.12) !important; color: #10b981 !important; }
        .alert-warning { background: rgba(245,158,11,0.12) !important; color: #f59e0b !important; }
        .alert-info    { background: rgba(79,142,247,0.12) !important; color: #4f8ef7 !important; }
    </style>
</head>
<body>

<div class="login-left">
    <div class="grid-bg"></div>
    <div class="scan-line"></div>
    <div class="orb orb-1"></div>
    <div class="orb orb-2"></div>
    <div class="orb orb-3"></div>
    <div class="particles" id="particles"></div>
    <div class="logo-rings">
        <div class="logo-ring"></div>
        <div class="logo-ring"></div>
        <div class="logo-ring"></div>
    </div>

    <div class="floating-card fc-1">
        <div class="fc-label"><i class="bi bi-speedometer2 me-1"></i>Fleet Utilization</div>
        <div class="fc-value"><span class="counter" data-target="87.4" data-dec="1" data-suffix="%">0%</span></div>
        <div class="fc-sub">vs 81.2% last month</div>
        <div class="fc-badge"><i class="bi bi-arrow-up-short"></i>+6.2%</div>
    </div>

    <div class="floating-card fc-2">
        <div class="fc-label"><i class="bi bi-truck me-1"></i>Active Vehicles</div>
        <div class="fc-value blue"><span class="counter" data-target="23" data-dec="0" data-suffix="">0</span>&nbsp;<span style="font-size:1rem;color:var(--text-secondary)">/ 28</span></div>
        <div class="fc-sub">On trip right now</div>
        <div class="fc-badge"><i class="bi bi-circle-fill" style="font-size:0.45rem"></i>&nbsp;Live</div>
    </div>

    <div class="floating-card fc-3">
        <div class="fc-label"><i class="bi bi-fuel-pump me-1"></i>Fuel Saved</div>
        <div class="fc-value amber"><span class="counter" data-target="12.4" data-dec="1" data-suffix="k L">0</span></div>
        <div class="fc-sub">This quarter</div>
        <div class="fc-badge amber"><i class="bi bi-arrow-down-short"></i>-8.3% cost</div>
    </div>

    <div class="login-hero">
        <div class="hero-logo">Fleet<span>Flow</span></div>
        <div class="hero-tag">Modular Fleet &amp; Logistics Management</div>
        <p class="hero-desc">Replace manual logbooks with an intelligent, rule-based hub that optimizes your delivery fleet.</p>
        <ul class="feature-list">
            <li><i class="bi bi-check-circle-fill"></i> Real-time vehicle &amp; driver tracking</li>
            <li><i class="bi bi-check-circle-fill"></i> Automated cargo load validation</li>
            <li><i class="bi bi-check-circle-fill"></i> Maintenance &amp; service lifecycle</li>
            <li><i class="bi bi-check-circle-fill"></i> Financial analytics &amp; fuel ROI</li>
        </ul>
    </div>
</div>

<div class="login-right">
    <div class="login-form-container">
        <div class="login-title">Welcome back</div>
        <div class="login-subtitle">Sign in to access your fleet dashboard</div>

        {% with messages = get_flashed_messages(with_categories=true) %}
            {% if messages %}{% for category, message in messages %}
            <div class="alert"><i class="bi bi-exclamation-circle me-2"></i>{{ message }}</div>
            {% endfor %}{% endif %}
        {% endwith %}

        <form method="POST" action="/login">
            <div class="form-group">
                <label class="form-label">Email Address</label>
                <div class="input-icon-wrap">
                    <i class="bi bi-envelope input-icon"></i>
                    <input type="email" name="email" class="form-control" placeholder="you@fleetflow.com" required>
                </div>
            </div>
            <div class="form-group">
                <label class="form-label">Password</label>
                <div class="input-icon-wrap">
                    <i class="bi bi-lock input-icon"></i>
                    <input type="password" name="password" class="form-control" placeholder="Enter password" required>
                </div>
            </div>
            <button type="submit" class="btn-login mt-2">
                <i class="bi bi-arrow-right-circle me-2"></i>Sign In
            </button>
        </form>

        <div class="divider-text mt-4">New to FleetFlow?</div>
        <a href="/register" class="btn-register">
            <i class="bi bi-person-plus me-2"></i>Create an Account
        </a>

        <div class="divider-text mt-3">Demo Accounts</div>
        <div class="demo-accounts">
            <div class="demo-title">Click any row to autofill &mdash; password: admin123</div>
            <div class="demo-account" onclick="fillDemo('admin@fleetflow.com')">
                <span>admin@fleetflow.com</span><span class="role">Manager</span>
            </div>
            <div class="demo-account" onclick="fillDemo('dispatch@fleetflow.com')">
                <span>dispatch@fleetflow.com</span><span class="role">Dispatcher</span>
            </div>
            <div class="demo-account" onclick="fillDemo('safety@fleetflow.com')">
                <span>safety@fleetflow.com</span><span class="role">Safety Officer</span>
            </div>
            <div class="demo-account" onclick="fillDemo('finance@fleetflow.com')">
                <span>finance@fleetflow.com</span><span class="role">Financial Analyst</span>
            </div>
        </div>
    </div>
</div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.2/js/bootstrap.bundle.min.js"></script>
<script>
function fillDemo(email) {
    document.querySelector('input[name="email"]').value = email;
    document.querySelector('input[name="password"]').value = 'admin123';
    const btn = document.querySelector('.btn-login');
    btn.style.boxShadow = '0 0 0 3px rgba(0,212,170,0.4)';
    setTimeout(() => btn.style.boxShadow = '', 900);
}

// Animated counters
window.addEventListener('load', () => {
    setTimeout(() => {
        document.querySelectorAll('.counter').forEach(el => {
            const target = parseFloat(el.dataset.target);
            const dec = parseInt(el.dataset.dec || 0);
            const suffix = el.dataset.suffix || '';
            const duration = 2000;
            const start = performance.now();
            function update(now) {
                const progress = Math.min((now - start) / duration, 1);
                const ease = 1 - Math.pow(1 - progress, 3);
                const val = target * ease;
                el.textContent = (dec > 0 ? val.toFixed(dec) : Math.floor(val)) + suffix;
                if (progress < 1) requestAnimationFrame(update);
            }
            requestAnimationFrame(update);
        });
    }, 500);
});

// Particles
const container = document.getElementById('particles');
for (let i = 0; i < 30; i++) {
    const p = document.createElement('div');
    p.className = 'particle';
    p.style.left = Math.random() * 100 + '%';
    p.style.bottom = '-10px';
    p.style.setProperty('--drift', (Math.random() * 80 - 40) + 'px');
    p.style.animationDuration = (8 + Math.random() * 14) + 's';
    p.style.animationDelay = (Math.random() * 16) + 's';
    const size = (Math.random() * 2 + 1) + 'px';
    p.style.width = p.style.height = size;
    p.style.background = Math.random() > 0.5 ? '#00d4aa' : '#4f8ef7';
    container.appendChild(p);
}
</script>
</body>
</html>